package org.Dungeons;

import org.bukkit.Bukkit;
import org.bukkit.Location;
import org.bukkit.Particle;
import org.bukkit.entity.EntityType;
import org.bukkit.entity.Player;
import org.bukkit.scheduler.BukkitRunnable;
import org.bukkit.util.Vector;

import com.PluginBase.ParticleEmitter;

public class EntitySpawn {
	public EntitySpawn(Main main, EntityType entityType, Location spawnLocation, int spawnRange, boolean needsLineOfSight) {
		BukkitRunnable bukkitRunnable = new BukkitRunnable() {
			@Override
			public void run() {
				for (Player onlinePlayer : Bukkit.getOnlinePlayers()) {
					ParticleEmitter.getInstance().emitParticles(spawnLocation.getWorld(), spawnLocation, Particle.HEART, 1, 0, new Vector(0, 0, 0));
					if (onlinePlayer.getLocation().distance(spawnLocation) <= spawnRange) {
						spawnLocation.getWorld().spawnEntity(spawnLocation, entityType);
						this.cancel();
					}
				}
			}
		};
		bukkitRunnable.runTaskTimer(main, 60, 20);
	}
}
